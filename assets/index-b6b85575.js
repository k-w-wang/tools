import{r as a,a as d,R as b,j as S,b1 as E}from"./index-bda61c63.js";import{d as L}from"./debounce-4e606a1d.js";function C({content:p,onSplitChange:v}){const e=a.exports.useRef(null),n=a.exports.useRef([]).current,[s,c]=a.exports.useState(null),[l,g]=a.exports.useState({x:0,y:0}),[u,y]=a.exports.useState({x:0,y:0});return a.exports.useEffect(()=>{var r;if(e.current==null)return;const t=document.createTextNode(p);(r=e.current)==null||r.appendChild(t);const x=L(()=>{var h;const o=(h=e.current)==null?void 0:h.getBoundingClientRect();n.length=0;for(let m=1;m<t.length;m++){const f=document.createRange();f.setStart(t,m),f.setEnd(t,m+1),n.push({left:f.getBoundingClientRect().left-((o==null?void 0:o.left)??0),right:f.getBoundingClientRect().right-((o==null?void 0:o.left)??0),top:f.getBoundingClientRect().top-((o==null?void 0:o.top)??0),bottom:f.getBoundingClientRect().bottom-((o==null?void 0:o.top)??0)})}},1e3,!0),i=new ResizeObserver(()=>{x()});return i.observe(e.current),()=>{i.disconnect()}},[p]),a.exports.useEffect(()=>{var t,x;return(t=e.current)==null||t.addEventListener("mousemove",i=>{var h,m;const r=(h=e.current)==null?void 0:h.getBoundingClientRect(),o=(m=e.current)==null?void 0:m.scrollTop;y({x:i.clientX-((r==null?void 0:r.left)??0),y:i.clientY-((r==null?void 0:r.top)??0)+(o??0)})}),(x=e.current)==null||x.addEventListener("mouseleave",i=>{y({x:0,y:0})}),()=>{var i,r;(i=e.current)==null||i.removeEventListener("mousemove",()=>{console.log("remove mousemove")}),(r=e.current)==null||r.removeEventListener("mouseleave",()=>{console.log("remove mousemove")})}},[]),a.exports.useEffect(()=>{if(u.x===0||u.y===0){c(null),g({x:0,y:0});return}n.forEach((t,x)=>{t.left<=u.x&&t.right>=u.x&&t.top<=u.y&&t.bottom>=u.y&&(g({x:t.left-2,y:t.top}),c(x+1))})},[u]),d("div",{ref:e,title:"点击任意位置拆分",className:"content",style:{border:"1px dashed #3c85f0",padding:4,maxHeight:50,overflowY:"auto"},onClick:()=>{if(s==null)return;const t=[p.substring(0,s),p.substring(s)];v(t)},children:l.x!==0&&l.y!==0&&d("span",{className:"content-before",style:{left:l.x,top:l.y}})})}function B({content:p,className:v,onChange:e}){const[n,s]=a.exports.useState([p]),c=(l,g)=>{s(()=>(n.splice(g,1,...l),[...n])),e==null||e(n)};return d("div",{className:v,style:{display:"flex",flexDirection:"column",gap:"4px"},children:n.map((l,g)=>d(C,{content:l,onSplitChange:u=>c(u,g)},l+g.toString()))})}const N=()=>{const[p,v]=b.useState(["天壤将根据本协议约定向用户提供天壤小白的使用权及相关服务。 用户理解并认可，在天壤小白网站上注册账号时或开始使用天壤小白各功能模块等行为，表明用户同意本协议的全部内容，并将严格按照本协议约定履行协议项下全部义务。若您为未成年人，应在法定监护人监护、指导下阅读本条款，并在取得法定监护人的同意后使用天壤小白。请用户务必审慎阅读、充分理解本协议各条款内容，特别是免除或者限制责任的条款，限制、免责条款将以加粗形式提示用户注意 。如果用户对本协议有任何疑问，可以通过  xiaobai@tianrang-inc.com与我们联系。本协议自用户开始使用天壤小白各功能模块时成立并开始生效。","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！","这是一段测试文字！"]),e=(n,s)=>{v(c=>(c.splice(s,1,...n),[...c]))};return S(E,{children:[d("h1",{children:"V1版本"}),d(B,{content:"这是一段测试文字！",onChange:n=>{console.log(n)}},"v1"),d("h1",{children:"V2版本"}),d("div",{style:{display:"flex",flexDirection:"column",gap:4},children:p.map((n,s)=>d(C,{content:n,onSplitChange:c=>e(c,s)},n+s.toString()))},"v2")]})};export{N as default};
